==================
copy
==================

foo:
    COPY foo bar

---

    (source_file
      (target
        name: (identifier)
        (copy_command
          src: (path)
          dest: (path))))

==================
copy multi sources
==================

foo:
    COPY foo bar hop

---

    (source_file
      (target
        name: (identifier)
        (copy_command
          src: (path)
          src: (path)
          dest: (path))))

==================
copy with options
==================

foo:
    COPY --dir --keep-ts --platform=linux/arm64 foo bar

---

    (source_file
      (target
        name: (identifier)
        (copy_command
          option: (dir)
          option: (keep_ts)
          option: (platform
            value: (unquoted_string))
          src: (path)
          dest: (path))))

==================
copy target artifacts
==================

foo:
    COPY (+build/foo --from=+debian) +build/bar /

---

    (source_file
      (target
        name: (identifier)
        (copy_command
          src: (target_artifact_build_args
            (target_ref
              name: (identifier))
            (path)
            (build_arg
              name: (variable)
              value: (unquoted_string)))
          src: (target_artifact
            (target_ref
              name: (identifier))
            (path))
          dest: (path))))

==================
copy target artifacts with expansions
==================

foo:
    COPY \
        +build/${foo} \
        +${target}/foo \
        ${target}/foo \
        ${artifact} \
        (+$target/$foo --from=bar) \
        ($target/$foo --from=bar) \
        /

---

    (source_file
      (target
        name: (identifier)
        (copy_command
          (line_continuation)
          src: (target_artifact
            (target_ref
              name: (identifier))
            (path
              (expansion
                (variable))))
          (line_continuation)
          src: (target_artifact
            (target_ref
              name: (identifier
                (expansion
                  (variable))))
            (path))
          (line_continuation)
          src: (path
            (expansion
              (variable)))
          (line_continuation)
          src: (path
            (expansion
              (variable)))
          (line_continuation)
          src: (target_artifact_build_args
            (target_ref
              name: (identifier
                (expansion
                  (variable))))
            (path
              (expansion
                (variable)))
            (build_arg
              name: (variable)
              value: (unquoted_string)))
          (line_continuation)
          src: (target_artifact_build_args
            (unquoted_string
              (expansion
                (variable))
              (expansion
                (variable)))
            (build_arg
              name: (variable)
              value: (unquoted_string)))
          (line_continuation)
          dest: (path))))
